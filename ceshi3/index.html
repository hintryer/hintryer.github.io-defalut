<!DOCTYPE html>
<html>
  <head>
    <title>Ace Editor Example</title>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.4.12/src/ace.js" type="text/javascript" charset="utf-8"></script>
    <!--添加clipboard库-->
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script>
    <style>
      #editor {
        border: 3px solid #0e0e0e;
        font-size: 16px;
        height: 600px;
        margin: 10px auto;
      }

      body {
        margin-top: 0;
        padding: 0;
        font-size: 16px;
        padding: 30px;
        font-family: ptima-Regular;
        word-break: break-all;
      }

      h1 {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <h1>代码格式化工具</h1>
    <button id="format-btn">JS格式化</button>
    <button id="htmlformat-btn">HTML美化</button>
    <button id="download-btn">下载文件</button>
    <input id="copy" type="button" value="复制">
    <div id="editor">Enter your code here</div>
    <script>
      var editor = ace.edit("editor"); // 将"editor"作为参数传递给ace.edit()函数
      editor.setTheme("ace/theme/github"); //设置主题
      editor.session.setMode("ace/mode/javascript"); //设置程序语言模式
      editor.getSession().setUseWrapMode(true); //设置自动换行
      editor.setFontSize(16) // 设置字体16px
      // Initialize ClipboardJS
      var clipboard = new ClipboardJS("#copy", {
        text: function() {
          return editor.getValue(); // 返回编辑器中的文本作为要复制的内容
        }
      });
      // 复制成功和失败时的处理
      var copyButton = document.getElementById("copy");
      clipboard.on("success", function(e) {
        copyButton.value = "复制成功";
        e.clearSelection();
        setTimeout(function() {
          copyButton.value = "复制";
        }, 1000);
      });
      clipboard.on("error", function(e) {
        copyButton.value = "复制失败";
        setTimeout(function() {
          copyButton.value = "复制";
        }, 1000);
      });
    </script>
  </body>
</html>
